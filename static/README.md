# GitHub Pages Demo

This directory contains the interactive demo page that's deployed to GitHub Pages at https://microsoft.github.io/docfind/

## How It Works

The demo showcases docfind's search capabilities by searching through a corpus of news articles from the AG News dataset.

### Files

- **`index.html`** - The interactive demo page with search UI
- **`prepare_dataset.py`** - Script to download and convert the AG News dataset
- **`install.sh`** / **`install.ps1`** - Installation scripts for docfind CLI tool

### Generated Files (not in git)

These files are generated by the GitHub Actions workflow:

- `documents.json` - The AG News dataset in docfind format
- `docfind.js` - JavaScript bindings for the WASM module
- `docfind.wasm` - WebAssembly module with embedded search index
- `metrics.json` - Performance metrics displayed on the demo page
- `train.csv` / `test.csv` - Downloaded AG News CSV files

## Building Locally

To test the demo locally:

1. Build docfind from source:
   ```bash
   ./build.sh
   ```

2. Prepare the dataset (limit to 100 docs for quick testing):
   ```bash
   cd static
   python3 prepare_dataset.py 100
   ```

3. Build the search index:
   ```bash
   cd static
   ../target/release/docfind documents.json .
   ```

4. Serve the demo:
   ```bash
   python3 -m http.server 8080
   ```

5. Open http://localhost:8080 in your browser

## Deployment

The demo is automatically deployed to GitHub Pages when changes are pushed to the `main` branch via the `.github/workflows/static.yml` workflow.

The workflow:
1. Uses install script to download the latest docfind release
2. Downloads the AG News dataset (50,000 articles)
3. Converts the dataset to JSON format
4. Builds the search index
5. Collects performance metrics
6. Deploys everything to GitHub Pages

## Customizing the Dataset

To use a different number of documents, edit the workflow file and change:

```yaml
python3 prepare_dataset.py 50000  # Change this number
```

Note: More documents = larger WASM file = longer load times

## Dataset Source

The demo uses the AG News Classification Dataset:
- **Source**: AG's news corpus
- **Categories**: World, Sports, Business, Sci/Tech
- **Total Articles**: 120,000 (training set)
- **Format**: CSV with class index, title, and description

The dataset is downloaded from:
- Primary: https://raw.githubusercontent.com/mhjabreel/CharCnn_Keras/master/data/ag_news_csv/train.csv
- Fallback: https://huggingface.co/datasets/fancyzhx/ag_news/resolve/main/train.csv
